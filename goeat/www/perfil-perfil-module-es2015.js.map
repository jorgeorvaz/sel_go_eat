{"version":3,"sources":["./src/app/perfil/perfil.page.html","./src/app/perfil/perfil-routing.module.ts","./src/app/perfil/perfil.module.ts","./src/app/perfil/perfil.page.scss","./src/app/perfil/perfil.page.ts"],"names":[],"mappings":"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","file":"perfil-perfil-module-es2015.js","sourcesContent":["export default \"\\r\\n\\r\\n<ion-page class=\\\"ion-page\\\" id=\\\"main-content\\\"></ion-page>\\r\\n  <ion-header>\\r\\n    <ion-toolbar color=\\\"primary\\\">\\r\\n    <img id=\\\"logo\\\" src=\\\".././../assets/logo.png\\\">\\r\\n  </ion-toolbar>\\r\\n  </ion-header>\\r\\n<ion-content padding>\\r\\n  <ion-card>\\r\\n    <ion-profile-pic>\\r\\n      <img id=\\\"imagen_perfil\\\" src=\\\"./assets/imgs/perfil.png\\\">\\r\\n    </ion-profile-pic>\\r\\n\\r\\n    <ion-parrafo id=\\\"user\\\">\\r\\n      <p>{{userEmail}}</p>\\r\\n    </ion-parrafo>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-item lines = \\\"none\\\">\\r\\n    <ion-input type=\\\"email\\\" placeholder=\\\"Nuevo email\\\" [(ngModel)]=\\\"correo\\\"></ion-input>\\r\\n  </ion-item>\\r\\n    \\r\\n  \\r\\n  <ion-button class=\\\"ion-padding-horizontal\\\" expand=\\\"block\\\" (click)=\\\"perfil()\\\">Cambiar email</ion-button>\\r\\n    \\r\\n\\r\\n  <ion-item lines = \\\"none\\\">\\r\\n    <ion-input type=\\\"password\\\" placeholder=\\\"Nueva contraseña\\\" [(ngModel)]=\\\"contrasena\\\"></ion-input>\\r\\n  </ion-item>\\r\\n    \\r\\n  \\r\\n  <ion-button class=\\\"ion-padding-horizontal\\\" expand=\\\"block\\\" (click)=\\\"password()\\\">Cambiar contraseña</ion-button>\\r\\n   \\r\\n</ion-content>\\r\\n<ion-footer>\\r\\n  <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"logout()\\\">Cerrar sesión</ion-button>\\r\\n</ion-footer>\\r\\n\\r\\n\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PerfilPage } from './perfil.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PerfilPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PerfilPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\r\nimport { PerfilPage } from './perfil.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PerfilPageRoutingModule\r\n  ],\r\n  declarations: [PerfilPage]\r\n})\r\nexport class PerfilPageModule {}\r\n","export default \"#imagen_perfil {\\n  display: block;\\n  margin: auto;\\n  width: 50%;\\n}\\n\\n#user {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGVyZmlsL0Q6XFxQcmFjdGljYXNcXGFwbGljYWNpb25fZmluYWxcXHNlbF9nb19lYXRcXGdvZWF0L3NyY1xcYXBwXFxwZXJmaWxcXHBlcmZpbC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BlcmZpbC9wZXJmaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksY0FBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGVyZmlsL3BlcmZpbC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW1hZ2VuX3BlcmZpbHtcclxuICAgIGRpc3BsYXk6YmxvY2s7XHJcbiAgICBtYXJnaW46YXV0bztcclxuICAgIHdpZHRoOiA1MCU7XHJcbn1cclxuXHJcbiN1c2Vye1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbiIsIiNpbWFnZW5fcGVyZmlsIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbjogYXV0bztcbiAgd2lkdGg6IDUwJTtcbn1cblxuI3VzZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from '../auth.service';\r\nimport { NavController, ToastController } from '@ionic/angular';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\n\r\n@Component({\r\n  selector: 'app-perfil',\r\n  templateUrl: './perfil.page.html',\r\n  styleUrls: ['./perfil.page.scss'],\r\n})\r\nexport class PerfilPage implements OnInit {\r\n\r\n  userEmail: string;\r\n  correo: string;\r\n  contrasena: string;\r\n\r\n  constructor(private navCtrl: NavController, private authService: AuthService, private toastCtrl: ToastController) { }\r\n\r\n  ngOnInit() {\r\n    \r\n    this.authService.userDetails().subscribe(res => {\r\n      console.log('res',res.email);\r\n      if (res !== null) {\r\n        this.userEmail = res.email;\r\n      } else {\r\n        this.navCtrl.navigateBack('');\r\n      }\r\n    }, err => {\r\n      console.log('err', err);\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    this.authService.logoutUser()\r\n      .then(res => {\r\n        console.log(res);\r\n        this.navCtrl.navigateBack('');\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  async perfil(){\r\n    console.log(this.correo);\r\n    var user = firebase.auth().currentUser;\r\n    firebase.auth().useDeviceLanguage();\r\n    user.updateEmail(this.correo).then(async res => {\r\n      let toast = await this.toastCtrl.create({\r\n        duration: 3000,\r\n        message: 'Su correo se cambio con éxito'\r\n      });\r\n      toast.present();\r\n      user.sendEmailVerification().then(function() {\r\n        alert('verifica tu email');\r\n      }).catch(function(error) {\r\n        console.log(error);\r\n      });\r\n    }).catch(function(error){\r\n      alert(error.message);\r\n    });\r\n  }\r\n\r\n  async password(){\r\n    console.log(this.contrasena);\r\n    var user = firebase.auth().currentUser;\r\n    user.updatePassword(this.contrasena).then(async res => {\r\n      let toast = await this.toastCtrl.create({\r\n        duration: 3000,\r\n        message: 'Su contraseña se ha cambiado'\r\n      });\r\n      toast.present();\r\n    }).catch(function(error){\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  \r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}