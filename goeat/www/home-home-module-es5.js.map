{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts","webpack:///src/app/home/restaurante.model.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","navCtrl","authService","geolocation","plt","iab","count_position","usuario","isError","isLogged","map","google","maps","Map","home","Marker","infowindow","InfoWindow","isTracking","trackedRoute","currentMapTrack","start","end","direction","DirectionsResult","loadMap","loadUserPosition","userDetails","subscribe","res","userEmail","email","navigateBack","err","console","log","logoutUser","then","error","latLng","LatLng","styles","MapTypeStyle","featureType","stylers","visibility","mapOptions","MapOptions","center","zoom","mapTypeId","MapTypeId","ROADMAP","mapTypeControl","mapElement","nativeElement","ready","getCurrentPosition","resp","lat","coords","latitude","lng","longitude","focusMap","addMarker","setCenter","setZoom","info","position","animation","Animation","DROP","icon","infoWindow","content","addListener","open","setMap","getAnimation","setAnimation","BOUNCE","my_coords","navigator","request","places","PlaceSearchRequest","type","radius","location","getPosition","service","PlacesService","nearbySearch","results","status","PlacesServiceStatus","OK","place","addNearbyMarker","e","query","detail","value","textSearch","PlaceResult","url","scaledSize","Size","origin","Point","anchor","marker","geometry","distancia","getDistanceFromLatLonInMeters","photo","photos","length","getUrl","maxWidth","maxHeight","setContent","name","vicinity","positionSubscription","watchPosition","data","push","redrawPath","Polyline","geodesic","strokeColor","strokeOpacity","strokeWeight","unsubscribe","lat1","lon1","lat2","lon2","R","dLat","deg2rad","dLon","a","Math","sin","cos","c","atan2","sqrt","d","round","deg","PI","rest","id","ocupacion","insertar_restaurante","read","selector","template","Restaurante"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <img id=\\\"logo\\\" src=\\\".././../assets/logo.png\\\">\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-searchbar placeholder=\\\"Buscar restaurante...\\\" (ionChange)=\\\"findPlace($event)\\\" [debounce]=\\\"500\\\"></ion-searchbar>\\r\\n\\r\\n  <div *ngIf=\\\"direction\\\">\\r\\n    <ion-card *ngFor=\\\"let route of direction.routes; let i = index;\\\">\\r\\n      <ion-card-header>\\r\\n        <ion-card-subtitle>{{ route.legs[0].duration.text }}</ion-card-subtitle>\\r\\n        <ion-card-title>{{ route.legs[0].distance.text }}</ion-card-title>\\r\\n      </ion-card-header>\\r\\n      <ion-card-content>\\r\\n        <ion-button (click)=\\\"pickRoute(i)\\\">Pick Route</ion-button>\\r\\n        <ion-button (click)=\\\"openNativeRoute(route)\\\">Show native Route</ion-button>\\r\\n      </ion-card-content>\\r\\n    </ion-card>\\r\\n  </div>\\r\\n\\r\\n  <div #map id=\\\"map\\\"></div>\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"toggleMarker()\\\">¿Dónde estas?</ion-button>\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"showNearby()\\\">Mostrar bares alrededor</ion-button>\\r\\n\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"startTracking()\\\" color=\\\"success\\\" *ngIf=\\\"!isTracking\\\">\\r\\n    <ion-icon name=\\\"locate\\\" slot=\\\"icon-left\\\"></ion-icon>Localizame\\r\\n  </ion-button>\\r\\n\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"stopTracking()\\\" color=\\\"warning\\\" *ngIf=\\\"isTracking\\\">\\r\\n    <ion-icon name=\\\"hand\\\" slot=\\\"icon-left\\\"></ion-icon>Dejar de localizarme\\r\\n  </ion-button>\\r\\n\\r\\n  <div style=\\\"width:100%; height:50%\\\">\\r\\n    <ion-list *ngFor=\\\"let place of places; let i = index\\\">\\r\\n    <ion-item *ngIf=\\\"i < 3\\\">\\r\\n      <ion-card>\\r\\n        <ion-card-header>\\r\\n            <ion-card-title>{{place.name}}</ion-card-title>\\r\\n          </ion-card-header>\\r\\n        <ion-card-content>\\r\\n           Valoracion: {{place.rating}}/5 - \\r\\n           Ocupacion: Desconocida\\r\\n           <ion-button expand=\\\"block\\\" (click)=\\\"insertar_este_lugar(place)\\\">¿Estás aquí?</ion-button>\\r\\n        </ion-card-content>\\r\\n      </ion-card>\\r\\n    </ion-item>\\r\\n    </ion-list>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HomePage } from './home.page';\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","export default \"#map {\\n  height: 50%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9EOlxcUHJhY3RpY2FzXFxhcGxpY2FjaW9uX2ZpbmFsXFxzZWxfZ29fZWF0XFxnb2VhdC9zcmNcXGFwcFxcaG9tZVxcaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcCB7XHJcbiAgaGVpZ2h0OiA1MCU7XHJcbn1cclxuXHJcblxyXG4iLCIjbWFwIHtcbiAgaGVpZ2h0OiA1MCU7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ViewChild, ElementRef } from '@angular/core';\r\nimport { NavController } from '@ionic/angular';\r\nimport { AuthService } from '../auth.service';\r\nimport { Usuario } from '../registro/usuario.model';\r\nimport { Router } from '@angular/router';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport { Geolocation, GeolocationOptions, Geoposition, PositionError } from '@ionic-native/geolocation/ngx';\r\nimport { dashCaseToCamelCase } from '@angular/compiler/src/util';\r\nimport { Subscription } from 'rxjs';\r\nimport { Platform } from '@ionic/angular';\r\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\r\nimport {Restaurante} from './restaurante.model';\r\ndeclare var google: any;\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit {\r\n  \r\n  count_position:any = 0;\r\n  options: GeolocationOptions;\r\n  currentPos: Geoposition;\r\n  userEmail: string;\r\n  places: Array<any>;\r\n  usuario: Usuario = new Usuario();\r\n  public isError = false;\r\n  public isLogged = false;\r\n  @ViewChild('map', { read: ElementRef, static: false }) mapRef: ElementRef;\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  map = google.maps.Map;\r\n  home = google.maps.Marker;\r\n  infowindow = new google.maps.InfoWindow();\r\n  isTracking = false;\r\n  trackedRoute = [];\r\n  currentMapTrack = null;\r\n  positionSubscription: Subscription;\r\n  locationWatchStarted: boolean;\r\n  locationSubscription: any;\r\n  start = '';\r\n  end = '';\r\n  direction = google.maps.DirectionsResult;\r\n  restaurante: Restaurante\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private authService: AuthService,\r\n    private geolocation: Geolocation,\r\n    private plt: Platform,\r\n    private iab: InAppBrowser\r\n    ) { }\r\n\r\n  ionViewDidEnter() {\r\n    this.loadMap();\r\n    this.loadUserPosition();\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n\r\n    this.authService.userDetails().subscribe(res => {\r\n      if (res !== null) {\r\n        this.userEmail = res.email;\r\n      } else {\r\n        this.navCtrl.navigateBack('');\r\n      }\r\n    }, err => {\r\n      console.log('err', err);\r\n    });\r\n  }\r\n  logout() {\r\n    this.authService.logoutUser()\r\n      .then(res => {\r\n        console.log(res);\r\n        this.navCtrl.navigateBack('');\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n  loadMap() {\r\n    let latLng = new google.maps.LatLng(40.0000000, -4.0000000);\r\n\r\n    let styles = google.maps.MapTypeStyle = [\r\n      {\r\n        featureType: 'poi',\r\n        stylers: [\r\n          {\r\n            visibility: 'off'\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n\r\n    let mapOptions = google.maps.MapOptions = {\r\n      center: latLng,\r\n      zoom: 5,\r\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n      styles: styles,\r\n      mapTypeControl: false\r\n    };\r\n\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n  }\r\n\r\n  loadUserPosition() {\r\n    this.plt.ready().then(() => {\r\n      this.geolocation.getCurrentPosition().then(resp => {\r\n        const lat = resp.coords.latitude;\r\n        const lng = resp.coords.longitude;\r\n        this.focusMap(lat, lng);\r\n        this.addMarker(\r\n          lat,\r\n          lng,\r\n          'Tu posición'\r\n        );\r\n      });\r\n    });\r\n  }\r\n\r\n  focusMap(lat, lng) {\r\n    let latLng = new google.maps.LatLng(lat, lng);\r\n    this.map.setCenter(latLng);\r\n    this.map.setZoom(15);\r\n  }\r\n\r\n  addMarker(lat, lng, info) {\r\n    let latLng = new google.maps.LatLng(lat, lng);\r\n\r\n    this.home = new google.maps.Marker({\r\n      map: this.map,\r\n      position: latLng,\r\n      animation: google.maps.Animation.DROP,\r\n      icon:\r\n        'https://developers.google.com/maps/documentation/javascript/examples/full/images/library_maps.png'\r\n    });\r\n\r\n    let infoWindow = new google.maps.InfoWindow({\r\n      content: info\r\n    });\r\n    this.home.addListener('click', () => {\r\n      infoWindow.open(this.map, this.home);\r\n    });\r\n  }\r\n\r\n  removeMarker() {\r\n    this.home.setMap(null);\r\n  }\r\n\r\n  toggleMarker() {\r\n    if (this.home.getAnimation() !== null) {\r\n      this.home.setAnimation(null);\r\n    } else {\r\n      this.home.setAnimation(google.maps.Animation.BOUNCE);\r\n    }\r\n  }\r\n\r\n  private setCurrentLocation() {\r\n    let my_coords:Array<any> = [];\r\n    if ('geolocation' in navigator) {\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        my_coords[0] = position.coords.latitude;\r\n        my_coords[1] = position.coords.longitude;\r\n\r\n      });\r\n    }\r\n    return my_coords;\r\n  }\r\n\r\n  showNearby() {\r\n    let request = google.maps.places.PlaceSearchRequest = {\r\n      type: ['restaurant'],\r\n      radius: 400,\r\n      location: this.home.getPosition()\r\n    };\r\n    \r\n    let service = new google.maps.places.PlacesService(this.map);\r\n    service.nearbySearch(request, (results, status) => {\r\n      this.places=results;\r\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\r\n        for (let place of results) {\r\n          this.addNearbyMarker(place);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  findPlace(e: CustomEvent) {\r\n    let request = {\r\n      query: e.detail.value\r\n    };\r\n\r\n    let service = new google.maps.places.PlacesService(this.map);\r\n\r\n    service.textSearch(request, (results, status) => {\r\n      console.log('results: ', results);\r\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\r\n        for (let place of results) {\r\n          this.addNearbyMarker(place);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  addNearbyMarker(place = google.maps.places.PlaceResult) {\r\n    const icon = {\r\n      url: place.icon,\r\n      scaledSize: new google.maps.Size(25, 25),\r\n      origin: new google.maps.Point(0, 0),\r\n      anchor: new google.maps.Point(0, 0)\r\n    };\r\n\r\n    let marker = new google.maps.Marker({\r\n      map: this.map,\r\n      animation: google.maps.Animation.DROP,\r\n      position: place.geometry.location,\r\n      icon: icon\r\n    });\r\n\r\n    let request = google.maps.places.PlaceSearchRequest = {\r\n      location: this.home.getPosition()\r\n    };\r\n\r\n    let distancia = this.getDistanceFromLatLonInMeters(\r\n      request.location.lat(),\r\n      request.location.lng(),\r\n      place.geometry.location.lat(),\r\n      place.geometry.location.lng());\r\n      console.log(distancia);\r\n\r\n    marker.addListener('click', () => {\r\n      let photo = '';\r\n\r\n      if (place.photos.length > 0) {\r\n        photo = place.photos[0].getUrl({ maxWidth: 100, maxHeight: 100 });\r\n      }\r\n      this.infowindow\r\n        .setContent(`<img src=\"${photo}\" style=\"width: 100%;max-height: 100px;object-fit: contain;\"/><br>\r\n      <b>${place.name}</b><br>${place.vicinity}</b><br>${distancia} metros`);\r\n      this.infowindow.open(this.map, marker);\r\n    });\r\n  }\r\n\r\n  startTracking() {\r\n    this.isTracking = true;\r\n    this.trackedRoute = [];\r\n    if (this.currentMapTrack) {\r\n      this.currentMapTrack.setMap(null);\r\n    }\r\n\r\n    this.positionSubscription = this.geolocation\r\n      .watchPosition()\r\n      .subscribe(data => {\r\n        console.log('new position: ', data);\r\n        this.trackedRoute.push({\r\n          lat: data.coords.latitude,\r\n          lng: data.coords.longitude\r\n        });\r\n        this.redrawPath(this.trackedRoute);\r\n      });\r\n  }\r\n\r\n  redrawPath(path) {\r\n    console.log('paint: ', path);\r\n    if (this.currentMapTrack) {\r\n      this.currentMapTrack.setMap(null);\r\n    }\r\n\r\n    if (path.length > 1) {\r\n      this.currentMapTrack = new google.maps.Polyline({\r\n        path: path,\r\n        geodesic: true,\r\n        strokeColor: '#ff00ff',\r\n        strokeOpacity: 1.0,\r\n        strokeWeight: 3\r\n      });\r\n      this.currentMapTrack.setMap(this.map);\r\n    }\r\n  }\r\n\r\n  stopTracking() {\r\n    this.isTracking = false;\r\n    this.positionSubscription.unsubscribe();\r\n  }\r\n\r\n\r\n  getDistanceFromLatLonInMeters(lat1,lon1,lat2,lon2) {\r\n    var R = 6371; // Radius of the earth in km\r\n    var dLat = this.deg2rad(lat2-lat1);  // deg2rad below\r\n    var dLon = this.deg2rad(lon2-lon1); \r\n    var a = \r\n      Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n      Math.cos(this.deg2rad(lat1)) * Math.cos(this.deg2rad(lat2)) * \r\n      Math.sin(dLon/2) * Math.sin(dLon/2)\r\n      ; \r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n    var d = R * c; // Distance in km\r\n    d = Math.round(d*1000);\r\n    return d;\r\n  }\r\n  \r\n  deg2rad(deg) {\r\n    return deg * (Math.PI/180)\r\n  }\r\n  \r\n  insertar_este_lugar(place){\r\n    let rest = new Restaurante();\r\n    rest.id = place.id;\r\n    rest.ocupacion += 1;\r\n    this.authService.insertar_restaurante(rest);\r\n    console.log(rest);\r\n  }\r\n  \r\n}","export class Restaurante{\r\n    id?:string;\r\n    ocupacion?:number = 0;\r\n};"]}