{"version":3,"sources":["webpack:///src/app/perfil/perfil.page.html","webpack:///src/app/perfil/perfil-routing.module.ts","webpack:///src/app/perfil/perfil.module.ts","webpack:///src/app/perfil/perfil.page.scss","webpack:///src/app/perfil/perfil.page.ts"],"names":["routes","path","component","PerfilPageRoutingModule","imports","forChild","exports","PerfilPageModule","declarations","PerfilPage","navCtrl","authService","toastCtrl","userDetails","subscribe","res","console","log","email","userEmail","navigateBack","err","logoutUser","then","error","correo","user","currentUser","useDeviceLanguage","updateEmail","create","duration","message","toast","present","sendEmailVerification","alert","contrasena","updatePassword","selector","template"],"mappings":"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","file":"perfil-perfil-module-es5.js","sourcesContent":["export default \"\\r\\n\\r\\n<ion-page class=\\\"ion-page\\\" id=\\\"main-content\\\"></ion-page>\\r\\n  <ion-header>\\r\\n    <ion-toolbar color=\\\"primary\\\">\\r\\n    <img id=\\\"logo\\\" src=\\\".././../assets/logo.png\\\">\\r\\n  </ion-toolbar>\\r\\n  </ion-header>\\r\\n<ion-content padding>\\r\\n  <ion-card>\\r\\n    <ion-profile-pic>\\r\\n      <img id=\\\"imagen_perfil\\\" src=\\\"./assets/imgs/perfil.png\\\">\\r\\n    </ion-profile-pic>\\r\\n\\r\\n    <ion-parrafo id=\\\"user\\\">\\r\\n      <p>{{userEmail}}</p>\\r\\n    </ion-parrafo>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-item lines = \\\"none\\\">\\r\\n    <ion-input type=\\\"email\\\" placeholder=\\\"Nuevo email\\\" [(ngModel)]=\\\"correo\\\"></ion-input>\\r\\n  </ion-item>\\r\\n    \\r\\n  \\r\\n  <ion-button class=\\\"ion-padding-horizontal\\\" expand=\\\"block\\\" (click)=\\\"perfil()\\\">Cambiar email</ion-button>\\r\\n    \\r\\n\\r\\n  <ion-item lines = \\\"none\\\">\\r\\n    <ion-input type=\\\"password\\\" placeholder=\\\"Nueva contraseña\\\" [(ngModel)]=\\\"contrasena\\\"></ion-input>\\r\\n  </ion-item>\\r\\n    \\r\\n  \\r\\n  <ion-button class=\\\"ion-padding-horizontal\\\" expand=\\\"block\\\" (click)=\\\"password()\\\">Cambiar contraseña</ion-button>\\r\\n   \\r\\n</ion-content>\\r\\n<ion-footer>\\r\\n  <div class=\\\"footer\\\">\\r\\n    <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"logout()\\\">Cerrar sesión</ion-button>\\r\\n  </div>\\r\\n</ion-footer>\\r\\n\\r\\n\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PerfilPage } from './perfil.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PerfilPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PerfilPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\r\nimport { PerfilPage } from './perfil.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PerfilPageRoutingModule\r\n  ],\r\n  declarations: [PerfilPage]\r\n})\r\nexport class PerfilPageModule {}\r\n","export default \"#imagen_perfil {\\n  display: block;\\n  margin: auto;\\n  width: 50%;\\n}\\n\\n#user {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGVyZmlsL0Q6XFxQcmFjdGljYXNcXGFwbGljYWNpb25fZmluYWxcXHNlbF9nb19lYXRcXGdvZWF0L3NyY1xcYXBwXFxwZXJmaWxcXHBlcmZpbC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BlcmZpbC9wZXJmaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksY0FBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGVyZmlsL3BlcmZpbC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW1hZ2VuX3BlcmZpbHtcclxuICAgIGRpc3BsYXk6YmxvY2s7XHJcbiAgICBtYXJnaW46YXV0bztcclxuICAgIHdpZHRoOiA1MCU7XHJcbn1cclxuXHJcbiN1c2Vye1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4iLCIjaW1hZ2VuX3BlcmZpbCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW46IGF1dG87XG4gIHdpZHRoOiA1MCU7XG59XG5cbiN1c2VyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from '../auth.service';\r\nimport { NavController, ToastController } from '@ionic/angular';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\n\r\n@Component({\r\n  selector: 'app-perfil',\r\n  templateUrl: './perfil.page.html',\r\n  styleUrls: ['./perfil.page.scss'],\r\n})\r\nexport class PerfilPage implements OnInit {\r\n\r\n  userEmail: string;\r\n  correo: string;\r\n  contrasena: string;\r\n\r\n  constructor(private navCtrl: NavController, private authService: AuthService, private toastCtrl: ToastController) { }\r\n\r\n  ngOnInit() {\r\n    \r\n    this.authService.userDetails().subscribe(res => {\r\n      console.log('res',res.email);\r\n      if (res !== null) {\r\n        this.userEmail = res.email;\r\n      } else {\r\n        this.navCtrl.navigateBack('');\r\n      }\r\n    }, err => {\r\n      console.log('err', err);\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    this.authService.logoutUser()\r\n      .then(res => {\r\n        console.log(res);\r\n        this.navCtrl.navigateBack('');\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  async perfil(){\r\n    console.log(this.correo);\r\n    var user = firebase.auth().currentUser;\r\n    firebase.auth().useDeviceLanguage();\r\n    user.updateEmail(this.correo).then(async res => {\r\n      let toast = await this.toastCtrl.create({\r\n        duration: 3000,\r\n        message: 'Su correo se cambio con éxito'\r\n      });\r\n      toast.present();\r\n      user.sendEmailVerification().then(function() {\r\n        alert('verifica tu email');\r\n      }).catch(function(error) {\r\n        console.log(error);\r\n      });\r\n    }).catch(function(error){\r\n      alert(error.message);\r\n    });\r\n  }\r\n\r\n  async password(){\r\n    console.log(this.contrasena);\r\n    var user = firebase.auth().currentUser;\r\n    user.updatePassword(this.contrasena).then(async res => {\r\n      let toast = await this.toastCtrl.create({\r\n        duration: 3000,\r\n        message: 'Su contraseña se ha cambiado'\r\n      });\r\n      toast.present();\r\n    }).catch(function(error){\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  \r\n\r\n}\r\n"]}